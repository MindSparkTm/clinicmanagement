{% extends "base.html" %}
{% load staticfiles %}


{% block content %}
    <script>
        $("#pre_authorization_tab").addClass("current").siblings().removeClass("current");
    </script>

    <div class="mdl-card full-width">
        <div class="mdh-expandable-search">
            <i class="material-icons">search</i>
                <input type="text" id="search" placeholder="Search member by their names, ID no., or member no." size="1"
                       onkeyup="searchMembers(this.value)">
        </div>


        <div style="margin-left: 50px; margin-top:-50px;">
            <div id="no_result" style="display: none">
            <div class="mdl-card__title mdl-card--expand">
                <h2 class="mdl-card__title-text">No Results</h2>
            </div>
        </div>

        <div id="searchresult" style="display: none; max-width: 70%;">
            <table id="search_table" class="mdl-data-table mdl-js-data-table ">
                <thead>
                <tr>
                    <th class="mdl-data-table__cell--non-numeric full-width">Patient No</th>
                    <th>First Name</th>
                    <th>Last Name</th>
                    <th>Id No</th>
                </tr>
                </thead>
                <tbody>

                </tbody>
            </table>
        </div>
        </div>
    </div>
    <script>
        //Do ajax call for search box
        function searchMembers(str) {
            {#var link = "http://127.0.0.1:8000/payments/ajax_pre_authorization/"#}

            //ensure to remove previous prepended results to avoid duplicity
            $('#searchresult tbody').children().remove();
            if (/\S/.test(str) && str.length > 5) {
                $.ajax({
                    url: "http://127.0.0.1:8000/payments/api/v1/memberinfosanlam/",
                    type: "get",
                    data: {
                        search:str,
                    },
                    success: function (json) {
                        console.log(json)


                    }

                })
            } else {
                $("#no_result").hide()
                $('#searchresult').hide()
            }

        }

    </script>

{% endblock %}
