{% extends "base.html" %} {% load static %} {% load crispy_forms_tags %} {% block content %}
<script>
    $("#triage_tab").addClass("current").siblings().removeClass("current")


    function populateTriage(patient_no, first_name, last_name) {
        $("#waiting_list_table").hide()
        $("#triage").show()
        $("#patient_no").val(patient_no)
        $("#first_name").val(first_name).parent().addClass("is-dirty")
        $("#textfield_last_name").val(last_name).parent().addClass("is-dirty")
    }
</script>

<div id="waiting_list_table" class="mdl-card mdl-shadow--4dp util-center mdl-cell mdl-cell--8-col">
    <div class="mdl-card__title mdl-color--teal-500">
        <h2 class="mdl-card__title-text mdl-color-text--white">Waiting List</h2>
    </div>
    <div class="mdl-card__supporting-text mdl-cell mdl-cell--12-col">
        <table class="mdl-data-table mdl-js-data-table full-width">
            <thead>
                <tr>
                    <th class="mdl-data-table__cell--non-numeric full-width">Patient Name</th>
                    <th>Patient's Age</th>
                    <th>Patient Id.</th>
                </tr>
            </thead>
            <tbody>
                {% for patient in waiting_list %}
                <tr onclick="populateTriage({{ patient.patient_no }},'{{ patient.first_name }}', '{{ patient.last_name }}')">
                    <td class="mdl-data-table__cell--non-numeric">{{ patient.first_name }} {{ patient.last_name }}</td>
                    <td>{{ patient.age }}</td>
                    <td>{{ patient.patient_no }}</td>
                </tr>
                {% endfor %}

            </tbody>
        </table>

    </div>
</div>

<div id="triage" style="display:none" class="mdl-grid">
    <div class="mdl-card mdl-shadow--4dp util-center mdl-cell mdl-cell--8-col">
        <form method="post">
            {% csrf_token %}
            <span>{% if form.errors %}
                    {% for field in form %}
                        {% for error in field.errors %}
                            <div class="alert alert-danger">
                                <strong>{{ error|escape }}</strong>
                            </div>
                        {% endfor %}
                    {% endfor %}
                    {% for error in form.non_field_errors %}
                        <div class="alert alert-danger">
                            <strong>{{ error|escape }}</strong>
                        </div>
                    {% endfor %}
                {% endif %}</span>
            <input name="patient_no" id="patient_no" type="text" value="{% if form.patient_no.value != None %}{{ form.patient_no.value }}{% endif %}" readonly/>
            <fieldset>
                <legend>Confirm Patient Details</legend>
                <div class="mdl-grid ">
                    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label mdl-cell mdl-cell--6-col">
                        <label class="mdl-textfield__label mdl-color-text--grey" for="first_name">First Name</label>
                        <input class="mdl-textfield__input" type="text" id="first_name" name="first_name" value="{% if form.first_name.value != None %}{{ form.first_name.value }}{% endif %}" readonly/>
                    </div>
                    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label mdl-cell mdl-cell--6-col">
                        <label class="mdl-textfield__label mdl-color-text--grey" for="textfield_last_name">Last Name</label>
                        <input class="mdl-textfield__input" type="text" id="textfield_last_name" name="last_name" value="{% if form.last_name.value != None %}{{ form.last_name.value }}{% endif %}" readonly/>
                    </div>
                </div>
            </fieldset>

            <fieldset>
                <legend>Triage</legend>

                <div class="mdl-grid ">
                    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label mdl-cell mdl-cell--6-col">
                        <label class="mdl-textfield__label mdl-color-text--grey" for="textfield_systolic">systolic</label>
                        <input class="mdl-textfield__input" type="text" id="textfield_systolic" name="systolic" value="{% if form.systolic.value != None %}{{ form.systolic.value }}{% endif %}" required/>
                    </div>
                    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label mdl-cell mdl-cell--6-col">
                        <label class="mdl-textfield__label mdl-color-text--grey" for="textfield_diastolic">diastolic</label>
                        <input class="mdl-textfield__input" type="text" id="textfield_diastolic" name="diastolic" value="{% if form.diastolic.value != None %}{{ form.diastolic.value }}{% endif %}" required/>
                    </div>

                </div>

                <div class="mdl-grid ">
                    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label mdl-cell mdl-cell--6-col">
                        <label class="mdl-textfield__label mdl-color-text--grey" for="textfield_temperature">temperature in Celcius</label>
                        <input class="mdl-textfield__input" type="text" id="textfield_temperature" name="temperature" value="{% if form.temperature.value != None %}{{ form.temperature.value }}{% endif %}" required/>
                    </div>
                    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label mdl-cell mdl-cell--6-col">
                        <label class="mdl-textfield__label mdl-color-text--grey" for="textfield_oxygen_saturation">Oxygen Saturation</label>
                        <input class="mdl-textfield__input" type="text" id="textfield_oxygen_saturation" name="oxygen_saturation" value="{% if form.oxygen_saturation.value != None %}{{ form.oxygen_saturation.value }}{% endif %}" required/>
                    </div>
                </div>
                <div class="mdl-grid ">
                    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label mdl-cell mdl-cell--4-col">
                        <label class="mdl-textfield__label mdl-color-text--grey" for="textfield_heart_rate">Heart Rate</label>
                        <input class="mdl-textfield__input" type="text" id="textfield_heart_rate" name="heart_rate" value="{% if form.heart_rate.value != None %}{{ form.heart_rate.value }}{% endif %}" required/>
                    </div>
                    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label mdl-cell mdl-cell--4-col">
                        <label class="mdl-textfield__label mdl-color-text--grey" for="textfield_height">Height in Metres</label>
                        <input class="mdl-textfield__input" type="text" id="textfield_height" name="height" value="{% if form.height.value != None %}{{ form.height.value }}{% endif %}" required/>
                    </div>
                    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label mdl-cell mdl-cell--4-col">
                        <label class="mdl-textfield__label mdl-color-text--grey" for="textfield_weight">Weight in KG</label>
                        <input class="mdl-textfield__input" type="text" id="textfield_weight" name="weight" value="{% if form.weight.value != None %}{{ form.weight.value }}{% endif %}" required/>
                    </div>


                </div>
                <div class="mdl-grid">

                    <div class="mdl-textfield mdl-js-textfield mdl-cell mdl-cell--12-col">
                        <input class="mdl-textfield__input" type="text" value="{% if form.random_glucose.value != None %}{{ form.random_glucose.value }}{% endif %}" id="random_glucose" name="random_glucose">
                        <label class="mdl-textfield__label" for="random_glucose">Random Glucose</label>
                    </div>
                </div>
                <div class="mdl-grid">

                    <div class="mdl-textfield mdl-js-textfield mdl-cell mdl-cell--12-col">
                        <textarea class="mdl-textfield__input" type="text" rows="8" id="urinalysis" name="urinalysis">{% if form.urinalysis.value != None %}{{ form.urinalysis.value }}{% endif %}</textarea>
                        <label class="mdl-textfield__label" for="urinalysis">Urinalysis</label>
                    </div>
                </div>

                <div class="mdl-grid">

                    <div class="mdl-textfield mdl-js-textfield mdl-cell mdl-cell--12-col">
                        <textarea class="mdl-textfield__input" type="text" rows="8" id="others" name="others">{% if form.others.value != None %}{{ form.others.value }}{% endif %}</textarea>
                        <label class="mdl-textfield__label" for="others">Others</label>
                    </div>
                </div>
            </fieldset>


            {# {{ form|crispy }}#}
            <button name="radiology_btn" class="mdl-button mdl-js-ripple-effect mdl-js-button mdl-button--raised mdl-button--colored mdl-color--primary" type="submit">Submit
                        </button>
        </form>
    </div>

    <div class="mdl-card mdl-shadow--4dp util-center mdl-cell mdl-cell--4-col">
        <div class="mdl-card__title mdl-color--teal-500">
            <h2 class="mdl-card__title-text mdl-color-text--white">Waiting List</h2>
        </div>
        <div class="mdl-card__supporting-text mdl-cell mdl-cell--12-col">
            <table class="mdl-data-table mdl-js-data-table full-width">
                <thead>
                    <tr>
                        <th class="mdl-data-table__cell--non-numeric full-width">Patient Name</th>
                        <th>Patient's Age</th>
                        <th>Patient Id.</th>
                    </tr>
                </thead>
                <tbody>
                    {% for patient in waiting_list %}
                    <tr onclick="populateTriage({{ patient.patient_no }},'{{ patient.first_name }}', '{{ patient.last_name }}')">
                        <td class="mdl-data-table__cell--non-numeric">{{ patient.first_name }} {{ patient.last_name }}</td>
                        <td>{{ patient.age }}</td>
                        <td>{{ patient.patient_no }}</td>
                    </tr>
                    {% endfor %}

                </tbody>
            </table>

        </div>
    </div>
</div>


{% endblock %}