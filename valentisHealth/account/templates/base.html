{% load staticfiles %}
{% load nav_state %}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <title>Valentis Health</title>

    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.blue_grey-light_blue.min.css"/>
    <link rel="stylesheet" href="{% static 'css/navbar.css' %}">

    <link rel="stylesheet" href="{% static 'css/index.css' %}">
    <link rel="stylesheet" href="{% static 'css/getmdl-select.min.css' %}">
    <link href='https://fonts.googleapis.com/css?family=Roboto:regular,bold,italic,thin,light,bolditalic,black,medium&amp;lang=en'
          rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="{% static 'css/intlTelInput.css' %}">
        <link rel="stylesheet" href="{% static 'css/intlTelInput.css' %}">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
    <link rel="stylesheet" href="{% static 'css/search_box.css' %}">


    <script defer src=" {% static  'js/getmdl-select.min.js' %}"></script>
    <script src="{% static 'js/jquery-3.3.1.min.js' %}"></script>
    <script defer src="{% static 'js/index.js' %}"></script>
    <script defer src="{% static 'js/material-datepicker.min.js' %}"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.js"></script>
    <script src="{% static 'js/intlTelInput.min.js' %}"></script>
    <script src="{% static 'js/tokenize2.min.js' %}"></script>
    <script src="{% static 'js/utils.js' %}"></script>

    {#    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Dropify/0.2.2/css/dropify.min.css"/>#}
    {#    <script src="https://cdnjs.cloudflare.com/ajax/libs/Dropify/0.2.2/js/dropify.min.js"></script>#}

    <!--datetome picker -->



</head>

<body>
<header class="mdl-layout__header mdl-layout__header--scroll" style="background-color: #0F2737">
    <div class="mdl-layout__header-row headstitle">
        <!-- Title -->
        <span class="mdl-layout-title logotwo"> <img src="{% static '/img/logothree.jpg'%}">  </span>
        <!-- Add spacer, to align navigation to the right -->
        <div class="mdl-layout-spacer"></div>
        <!-- Navigation -->
        <div class="mdl-navigation">
            {% if user.is_authenticated %}
                <a class="logout button-primary fa fa-home" href="{% url 'logout' %}"><span>Logout</span></a> {% else %}
                <a class="mdl-navigation__link" href="">login</a> {% endif %}
        </div>
    </div>
</header>


<section id="sideMenu">
    <nav>

  <a href="/registration/" class="{% nav_active request 'registration_models_list' %}" ><i class="fa fa-user-plus spav"> </i> Registration   </a>
       <a href="/nurse/models/create/"  class="{% nav_active request 'nurse_models_create' %}" > <i class="fa fa-address-book spav"> </i>  Triage  </a>
        <a href="/clinic/patientvisit/create/"  class="{% nav_active request 'clinic_patientvisit_create' %}"  > <i class="fa fa-clipboard spav"> </i> Clinic</a>
        <a href="/labs/" class="{% nav_active request 'labs_labs_list' %}"> <i class="fa fa-flask spav"> </i>  Labs  </a>
      <a href="/labs/radiology/" class="{% nav_active request 'labs_radiology_list' %}"> <i class="fa fa-bolt spav"> </i> Radiology </a>
       <a href="/medication/search/" class="{% nav_active request 'medication_models_search' %}"> <i class="fa fa-book spav"> </i> Prescriptions </a>
  <a href="{% url 'payments_pre_authorization_search' %}" class="{% nav_active request 'payments_pre_authorization_search' %}"> <i class="fa fa-book spav"> </i> Authorization </a>

    </nav>

</section>






<div class="mdl-grid">

    <script>
        var timestamp = moment("{{ patient.last_updated  }}");
        var wait = timestamp.diff(moment());
        console.log(wait)
    </script>

    {% if show_waiting_list %}

        <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--2-col" style="
        z-index: -1; "></div>

        <div id="waiting_list_table" class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--6-col">
            <div class="mdl-card__title mdl-color--teal-500">
                <h2 class="mdl-card__title-text mdl-color-text--white">From Triage</h2>
            </div>
            <div class="mdl-card__supporting-text mdl-cell mdl-cell--12-col">
                <table class="mdl-data-table mdl-js-data-table full-width">
                    <thead>
                    <tr>
                        <th class="mdl-data-table__cell--non-numeric full-width">Patient Name</th>
                        <th>Patient's Age</th>
                        <th>Patient Id.</th>
                        <th>Arrival Time.</th>
                        <th>Wait duration</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for patient in waiting_list %}
                        <tr onclick="window.location.href='/{{ link }}/{{ patient.patient_no }}/'">
                            <td class="mdl-data-table__cell--non-numeric">{{ patient.first_name }} {{ patient.last_name }}</td>
                            <td>{{ patient.age }}</td>
                            <td>{{ patient.patient_no }}</td>
                            <td>{{ patient.last_updated }}</td>
                            <td>{{ wait }}</td>
                        </tr>
                    {% endfor %}


                    </tbody>
                </table>

            </div>
        </div>
    {% endif %} {% if show_from_labs %}


{% endif %}

{%  if clinic %}
    <div class="mdl-cell mdl-cell--4-col">
        <div id="from_labs"  class="mdl-card mdl-shadow--4dp util-center mdl-cell mdl-cell--12-col waiting_table">
                <div class="mdl-card__title mdl-color--teal-500">
                    <h2 class="mdl-card__title-text mdl-color-text--white">From Labs </h2>
                </div>

                <div class="mdl-card__supporting-text mdl-cell mdl-cell--12-col">
                    <table class="mdl-data-table mdl-js-data-table full-width">
                        <thead>
                        <tr>
                            <th class="mdl-data-table__cell--non-numeric full-width">Patient Name</th>
                            <th>Patient's Age</th>
                            <th>Patient Id.</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for patient in from_labs %}
                            <tr onclick="window.location.href='/clinic/patientvisit/fromlabs/{{ patient.patient_no }}/'">
                                <td class="mdl-data-table__cell--non-numeric">{{ patient.first_name }} {{ patient.last_name }}</td>
                                <td style="text-align:left;">{{ patient.age }}</td>
                                <td style="text-align:left;">{{ patient.patient_no }}</td>
                            </tr>
                        {% endfor %}


                        </tbody>
                    </table>

                </div>
            </div>

        <div id="from_labs" class="mdl-card mdl-shadow--4dp util-center mdl-cell mdl-cell--12-col">
                <div class="mdl-card__title mdl-color--teal-500">
                    <h2 class="mdl-card__title-text mdl-color-text--white">From Radiology</h2>
                </div>
                <div class="mdl-card__supporting-text mdl-cell mdl-cell--12-col">
                    <table class="mdl-data-table mdl-js-data-table full-width">
                        <thead>
                        <tr>
                            <th class="mdl-data-table__cell--non-numeric full-width">Patient Name</th>
                            <th>Patient's Age</th>
                            <th>Patient Id.</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for patient in from_radiology %}
                            <tr onclick="window.location.href='/clinic/patientvisit/fromradiology/{{ patient.patient_no }}/'">
                                <td class="mdl-data-table__cell--non-numeric">{{ patient.first_name }} {{ patient.last_name }}</td>
                                <td style="text-align:left;">{{ patient.age }}</td>
                                <td style="text-align:left;">{{ patient.patient_no }}</td>
                            </tr>
                        {% endfor %}


                        </tbody>
                    </table>

                </div>
            </div>
    </div>

{% endif %}


</div>

{# content goes here#} {% block content %} {% endblock %}

<script src="https://code.getmdl.io/1.3.0/material.min.js"></script>
<script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/knockout/2.3.0/knockout-min.js'></script>

<script>
    $('input[type="date"]').val(new Date().toISOString().split('T')[0])
</script>
</body>

</html>